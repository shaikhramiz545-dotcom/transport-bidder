# TBidder â€“ Nginx config (server par copy karke use karo)
# 1. Is file ko copy karo: sudo cp nginx-tbidder.conf.example /etc/nginx/sites-available/tbidder
# 2. Domain replace karo: tbidder.com ki jagah apna domain (4 jagah)
# 3. Enable: sudo ln -s /etc/nginx/sites-available/tbidder /etc/nginx/sites-enabled/
# 4. Test: sudo nginx -t && sudo systemctl reload nginx
# 5. SSL: sudo certbot --nginx -d api.tbidder.com -d app.tbidder.com -d driver.tbidder.com -d admin.tbidder.com

# API backend (Node.js port 4000)
server {
    listen 80;
    server_name api.tbidder.com;
    location / {
        proxy_pass http://127.0.0.1:4000;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}

# User app (Flutter web)
server {
    listen 80;
    server_name app.tbidder.com;
    root /var/www/tbidder/user_app_web;
    index index.html;
    location / {
        try_files $uri $uri/ /index.html;
    }
}

# Driver app (Flutter web)
server {
    listen 80;
    server_name driver.tbidder.com;
    root /var/www/tbidder/driver_app_web;
    index index.html;
    location / {
        try_files $uri $uri/ /index.html;
    }
}

# Admin panel (Vite build)
server {
    listen 80;
    server_name admin.tbidder.com;
    root /var/www/tbidder/admin_panel_dist;
    index index.html;
    location / {
        try_files $uri $uri/ /index.html;
    }
}
